From 035365b5f7fb6e380191b494e92f0ede2dbdde57 Mon Sep 17 00:00:00 2001
From: tisenu100 <tisenu100@github.com>
Date: Fri Apr 11 16:45:49 2025 +0300
Subject: [PATCH] Disable Virtual Vibration

---

diff --git a/smali/com/android/server/audio/BtHelper$$ExternalSyntheticLambda0.smali b/smali/com/android/server/audio/BtHelper$$ExternalSyntheticLambda0.smali
deleted file mode 100644
index 772fb09..0000000
--- a/smali/com/android/server/audio/BtHelper$$ExternalSyntheticLambda0.smali
+++ /dev/null
@@ -1,111 +0,0 @@
-.class public final synthetic Lcom/android/server/audio/BtHelper$$ExternalSyntheticLambda0;
-.super Ljava/lang/Object;
-.source "qb/94473074 dbff70aba474d6778c6803659cc2a1e8b35def36a25340fb243c176bbdb492c9"
-
-# interfaces
-.implements Ljava/lang/Runnable;
-
-
-# instance fields
-.field public final synthetic f$0:Lcom/android/server/audio/BtHelper;
-
-
-# direct methods
-.method public synthetic constructor <init>(Lcom/android/server/audio/BtHelper;)V
-    .locals 0
-
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
-
-    iput-object p1, p0, Lcom/android/server/audio/BtHelper$$ExternalSyntheticLambda0;->f$0:Lcom/android/server/audio/BtHelper;
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public final run()V
-    .locals 4
-
-    iget-object p0, p0, Lcom/android/server/audio/BtHelper$$ExternalSyntheticLambda0;->f$0:Lcom/android/server/audio/BtHelper;
-
-    iget-object v0, p0, Lcom/android/server/audio/BtHelper;->mBluetoothHeadset:Landroid/bluetooth/BluetoothHeadset;
-
-    const/4 v1, 0x0
-
-    if-eqz v0, :cond_0
-
-    invoke-virtual {v0}, Landroid/bluetooth/BluetoothHeadset;->getConnectedDevices()Ljava/util/List;
-
-    move-result-object v0
-
-    if-eqz v0, :cond_0
-
-    invoke-interface {v0}, Ljava/util/List;->size()I
-
-    move-result v2
-
-    const/4 v3, 0x1
-
-    if-ne v2, v3, :cond_0
-
-    invoke-interface {v0, v1}, Ljava/util/List;->get(I)Ljava/lang/Object;
-
-    move-result-object v0
-
-    check-cast v0, Landroid/bluetooth/BluetoothDevice;
-
-    iget-object v1, p0, Lcom/android/server/audio/BtHelper;->mBluetoothHeadset:Landroid/bluetooth/BluetoothHeadset;
-
-    invoke-static {v0, v1}, Lcom/samsung/android/server/audio/utils/BtUtils;->isSamsungWatch(Landroid/bluetooth/BluetoothDevice;Landroid/bluetooth/BluetoothHeadset;)Z
-
-    move-result v1
-
-    :cond_0
-    const-string/jumbo v0, "receiveBtEvent updateWatchConnectionState = "
-
-    const-string v2, "AS.BtHelper"
-
-    invoke-static {v0, v2, v1}, Lcom/android/server/ExtendedEthernetServiceImpl$1$$ExternalSyntheticOutline0;->m(Ljava/lang/String;Ljava/lang/String;Z)V
-
-    iget-object p0, p0, Lcom/android/server/audio/BtHelper;->mVibratorManagerInternal:Lcom/android/server/vibrator/VibratorManagerInternal;
-
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerInternal;->mServiceWeakReference:Ljava/lang/ref/WeakReference;
-
-    invoke-virtual {p0}, Ljava/lang/ref/WeakReference;->get()Ljava/lang/Object;
-
-    move-result-object p0
-
-    check-cast p0, Lcom/android/server/vibrator/VibratorManagerService;
-
-    if-nez p0, :cond_1
-
-    goto :goto_0
-
-    :cond_1
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVibrationSettings:Lcom/android/server/vibrator/VibrationSettings;
-
-    iget-object p0, p0, Lcom/android/server/vibrator/VibrationSettings;->mCustomSettings:Lcom/android/server/vibrator/VibrationCustomSettings;
-
-    invoke-virtual {p0}, Ljava/lang/Object;->getClass()Ljava/lang/Class;
-
-    new-instance v0, Ljava/lang/StringBuilder;
-
-    const-string v2, "Update only watch connected: "
-
-    invoke-direct {v0, v2}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
-
-    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;
-
-    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object v0
-
-    const-string v2, "VibratorManagerService"
-
-    invoke-static {v2, v0}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    iput-boolean v1, p0, Lcom/android/server/vibrator/VibrationCustomSettings;->mOnlyWatchConnected:Z
-
-    :goto_0
-    return-void
-.end method
diff --git a/smali/com/android/server/audio/BtHelper.smali b/smali/com/android/server/audio/BtHelper.smali
index a24a3b3..f452df1 100644
--- a/smali/com/android/server/audio/BtHelper.smali
+++ b/smali/com/android/server/audio/BtHelper.smali
@@ -42,8 +42,6 @@
 
 .field public mScoConnectionState:I
 
-.field public mVibratorManagerInternal:Lcom/android/server/vibrator/VibratorManagerInternal;
-
 
 # direct methods
 .method public constructor <init>(Lcom/android/server/audio/AudioDeviceBroker;Landroid/content/Context;)V
@@ -3220,8 +3218,6 @@
     move-result-object v0
 
     check-cast v0, Lcom/android/server/vibrator/VibratorManagerInternal;
-
-    iput-object v0, p0, Lcom/android/server/audio/BtHelper;->mVibratorManagerInternal:Lcom/android/server/vibrator/VibratorManagerInternal;
     :try_end_0
     .catchall {:try_start_0 .. :try_end_0} :catchall_0
 
diff --git a/smali_classes2/com/android/server/vibrator/VibratorManagerService$1.smali b/smali_classes2/com/android/server/vibrator/VibratorManagerService$1.smali
index de1eac6..9e2a3a4 100644
--- a/smali_classes2/com/android/server/vibrator/VibratorManagerService$1.smali
+++ b/smali_classes2/com/android/server/vibrator/VibratorManagerService$1.smali
@@ -35,19 +35,19 @@
 
     move-result-object p1
 
-    const-string v0, "com.android.server.sepunion.semgoodcatchservice.GOOD_CATCH_STATE_CHANGED"
+    const-string p2, "com.android.server.sepunion.semgoodcatchservice.GOOD_CATCH_STATE_CHANGED"
 
-    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    invoke-virtual {p2, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
-    move-result v0
+    move-result p2
 
-    if-eqz v0, :cond_0
+    if-eqz p2, :cond_0
 
     iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mGoodCatchManager:Lcom/samsung/android/server/audio/GoodCatchManager;
 
-    if-nez p1, :cond_d
+    if-nez p1, :cond_a
 
     new-instance p1, Lcom/samsung/android/server/audio/GoodCatchManager;
 
@@ -62,29 +62,29 @@
     goto/16 :goto_6
 
     :cond_0
-    const-string v0, "android.intent.action.BOOT_COMPLETED"
+    const-string p2, "android.intent.action.BOOT_COMPLETED"
 
-    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    invoke-virtual {p2, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
-    move-result v0
+    move-result p2
 
-    const-string v1, "com.sec.media.action.VIBRTOR_LOGGING"
+    const/4 v0, 0x0
 
-    const/4 v2, 0x0
+    const-string v1, "com.sec.media.action.VIBRTOR_LOGGING"
 
-    if-eqz v0, :cond_2
+    if-eqz p2, :cond_2
 
     iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iget-object p2, p1, Lcom/android/server/vibrator/VibratorManagerService;->mContext:Landroid/content/Context;
 
-    sget-object v0, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->sInstance:Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
+    sget-object v2, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->sInstance:Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
 
-    if-nez v0, :cond_1
+    if-nez v2, :cond_1
 
-    new-instance v0, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
+    new-instance v2, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
 
-    invoke-direct {v0}, Ljava/lang/Object;-><init>()V
+    invoke-direct {v2}, Ljava/lang/Object;-><init>()V
 
     const-string v3, "HqmManagerService"
 
@@ -94,7 +94,7 @@
 
     check-cast v3, Landroid/os/SemHqmManager;
 
-    iput-object v3, v0, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mSemHqmManager:Landroid/os/SemHqmManager;
+    iput-object v3, v2, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mSemHqmManager:Landroid/os/SemHqmManager;
 
     const-string v3, "alarm"
 
@@ -104,9 +104,9 @@
 
     check-cast p2, Landroid/app/AlarmManager;
 
-    iput-object p2, v0, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mAlarmManager:Landroid/app/AlarmManager;
+    iput-object p2, v2, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mAlarmManager:Landroid/app/AlarmManager;
 
-    sput-object v0, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->sInstance:Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
+    sput-object v2, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->sInstance:Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
 
     :cond_1
     sget-object p2, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->sInstance:Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
@@ -125,13 +125,13 @@
 
     invoke-direct {p2, v1}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V
 
-    const/high16 v0, 0x4000000
+    const/high16 v1, 0x4000000
 
-    invoke-static {p0, v2, p2, v0}, Landroid/app/PendingIntent;->getBroadcast(Landroid/content/Context;ILandroid/content/Intent;I)Landroid/app/PendingIntent;
+    invoke-static {p0, v0, p2, v1}, Landroid/app/PendingIntent;->getBroadcast(Landroid/content/Context;ILandroid/content/Intent;I)Landroid/app/PendingIntent;
 
-    move-result-object v9
+    move-result-object v8
 
-    iget-object v3, p1, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mAlarmManager:Landroid/app/AlarmManager;
+    iget-object v2, p1, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mAlarmManager:Landroid/app/AlarmManager;
 
     invoke-static {}, Landroid/os/SystemClock;->elapsedRealtime()J
 
@@ -139,142 +139,41 @@
 
     const-wide/32 v0, 0x5265c00
 
-    add-long v5, p0, v0
+    add-long v4, p0, v0
 
-    const-wide/32 v7, 0x5265c00
+    const-wide/32 v6, 0x5265c00
 
-    const/4 v4, 0x3
+    const/4 v3, 0x3
 
-    invoke-virtual/range {v3 .. v9}, Landroid/app/AlarmManager;->setRepeating(IJJLandroid/app/PendingIntent;)V
+    invoke-virtual/range {v2 .. v8}, Landroid/app/AlarmManager;->setRepeating(IJJLandroid/app/PendingIntent;)V
 
     goto/16 :goto_6
 
     :cond_2
-    const-string v0, "android.intent.action.ACTION_SHUTDOWN"
+    const-string p2, "android.intent.action.ACTION_SHUTDOWN"
 
-    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    invoke-virtual {p2, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
-    move-result v0
+    move-result p2
 
-    if-nez v0, :cond_7
+    if-nez p2, :cond_4
 
     invoke-virtual {v1, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
-    move-result v0
-
-    if-eqz v0, :cond_3
-
-    goto/16 :goto_0
-
-    :cond_3
-    const-string v0, "android.media.STREAM_DEVICES_CHANGED_ACTION"
-
-    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result v0
-
-    const/4 v1, 0x2
-
-    if-eqz v0, :cond_4
-
-    const-string p1, "android.media.EXTRA_VOLUME_STREAM_TYPE"
-
-    const/4 v0, -0x1
-
-    invoke-virtual {p2, p1, v0}, Landroid/content/Intent;->getIntExtra(Ljava/lang/String;I)I
-
-    move-result p1
-
-    const-string v2, "android.media.EXTRA_VOLUME_STREAM_DEVICES"
-
-    invoke-virtual {p2, v2, v0}, Landroid/content/Intent;->getIntExtra(Ljava/lang/String;I)I
-
     move-result p2
 
-    const/4 v0, 0x3
-
-    if-ne p1, v0, :cond_d
-
-    and-int/lit8 p1, p2, 0x2
-
-    if-nez p1, :cond_d
-
-    iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object p1, p1, Lcom/android/server/vibrator/VibratorManagerService;->mHandler:Landroid/os/Handler;
-
-    new-instance p2, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;
-
-    const-string v0, "Detected device changed"
-
-    invoke-direct {p2, p0, v0}, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;-><init>(Lcom/android/server/vibrator/VibratorManagerService$1;Ljava/lang/String;)V
-
-    invoke-virtual {p1, p2}, Landroid/os/Handler;->post(Ljava/lang/Runnable;)Z
-
-    goto/16 :goto_6
-
-    :cond_4
-    const-string v0, "android.intent.action.HEADSET_PLUG"
-
-    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result v0
-
-    if-eqz v0, :cond_5
-
-    iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object p1, p1, Lcom/android/server/vibrator/VibratorManagerService;->mHandler:Landroid/os/Handler;
-
-    new-instance p2, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;
-
-    const-string v0, "headset plug"
-
-    invoke-direct {p2, p0, v0}, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;-><init>(Lcom/android/server/vibrator/VibratorManagerService$1;Ljava/lang/String;)V
-
-    invoke-virtual {p1, p2}, Landroid/os/Handler;->post(Ljava/lang/Runnable;)Z
-
-    goto/16 :goto_6
-
-    :cond_5
-    const-string v0, "android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED"
-
-    invoke-virtual {v0, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
-
-    move-result v0
-
-    if-eqz v0, :cond_6
-
-    const-string p1, "android.bluetooth.profile.extra.STATE"
-
-    invoke-virtual {p2, p1, v2}, Landroid/content/Intent;->getIntExtra(Ljava/lang/String;I)I
-
-    move-result p1
-
-    if-ne p1, v1, :cond_d
-
-    iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object p1, p1, Lcom/android/server/vibrator/VibratorManagerService;->mHandler:Landroid/os/Handler;
-
-    new-instance p2, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;
-
-    const-string v0, "a2dp device connected"
-
-    invoke-direct {p2, p0, v0}, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;-><init>(Lcom/android/server/vibrator/VibratorManagerService$1;Ljava/lang/String;)V
+    if-eqz p2, :cond_3
 
-    invoke-virtual {p1, p2}, Landroid/os/Handler;->post(Ljava/lang/Runnable;)Z
+    goto :goto_0
 
-    goto/16 :goto_6
-
-    :cond_6
+    :cond_3
     const-string p2, "com.android.launcher3.quickstep.closeall"
 
     invoke-virtual {p2, p1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
     move-result p1
 
-    if-eqz p1, :cond_d
+    if-eqz p1, :cond_a
 
     iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -290,30 +189,30 @@
 
     goto/16 :goto_6
 
-    :cond_7
+    :cond_4
     :goto_0
     iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mHqmHelper:Lcom/samsung/android/server/vibrator/VibratorHqmHelper;
 
-    if-eqz p1, :cond_d
+    if-eqz p1, :cond_a
 
     iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService;->mHqmLoggingData:Lcom/samsung/android/server/vibrator/VibratorHqmData;
 
-    new-instance v0, Ljava/util/ArrayList;
-
-    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V
-
     new-instance v1, Ljava/util/ArrayList;
 
     invoke-direct {v1}, Ljava/util/ArrayList;-><init>()V
 
-    move v3, v2
+    new-instance v2, Ljava/util/ArrayList;
+
+    invoke-direct {v2}, Ljava/util/ArrayList;-><init>()V
+
+    move v3, v0
 
     :goto_1
     const/4 v4, 0x5
 
-    if-ge v3, v4, :cond_9
+    if-ge v3, v4, :cond_6
 
     sget-object v4, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->BIG_DATA:[Ljava/lang/String;
 
@@ -321,7 +220,7 @@
 
     iget-object v6, p2, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mLoggingData:Ljava/util/HashMap;
 
-    invoke-static {v2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
+    invoke-static {v0}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
 
     move-result-object v7
 
@@ -339,21 +238,21 @@
 
     move-result-object v5
 
-    if-eqz v5, :cond_8
+    if-eqz v5, :cond_5
 
     aget-object v4, v4, v3
 
-    invoke-virtual {v0, v4}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+    invoke-virtual {v1, v4}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
 
-    invoke-virtual {v1, v5}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
+    invoke-virtual {v2, v5}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z
 
-    :cond_8
+    :cond_5
     add-int/lit8 v3, v3, 0x1
 
     goto :goto_1
 
-    :cond_9
-    invoke-virtual {v0}, Ljava/util/ArrayList;->size()I
+    :cond_6
+    invoke-virtual {v1}, Ljava/util/ArrayList;->size()I
 
     move-result p2
 
@@ -362,18 +261,18 @@
 
     invoke-direct {v3}, Lorg/json/JSONObject;-><init>()V
 
-    move v4, v2
+    move v4, v0
 
     :goto_2
-    if-ge v4, p2, :cond_a
+    if-ge v4, p2, :cond_7
 
-    invoke-virtual {v0, v4}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
+    invoke-virtual {v1, v4}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
 
     move-result-object v5
 
     check-cast v5, Ljava/lang/String;
 
-    invoke-virtual {v1, v4}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
+    invoke-virtual {v2, v4}, Ljava/util/ArrayList;->get(I)Ljava/lang/Object;
 
     move-result-object v6
 
@@ -390,7 +289,7 @@
 
     goto :goto_3
 
-    :cond_a
+    :cond_7
     invoke-virtual {v3}, Lorg/json/JSONObject;->toString()Ljava/lang/String;
 
     move-result-object p2
@@ -403,40 +302,40 @@
     const/4 p2, 0x0
 
     :goto_4
-    if-nez p2, :cond_b
+    if-nez p2, :cond_8
 
     goto :goto_5
 
-    :cond_b
-    const-string v0, "\\{"
+    :cond_8
+    const-string v1, "\\{"
 
-    const-string v1, ""
+    const-string v2, ""
 
-    invoke-virtual {p2, v0, v1}, Ljava/lang/String;->replaceAll(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    invoke-virtual {p2, v1, v2}, Ljava/lang/String;->replaceAll(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
 
     move-result-object p2
 
-    const-string v0, "\\}"
+    const-string v1, "\\}"
 
-    invoke-virtual {p2, v0, v1}, Ljava/lang/String;->replaceAll(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
+    invoke-virtual {p2, v1, v2}, Ljava/lang/String;->replaceAll(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
 
     move-result-object v11
 
     iget-object p2, p1, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mSemHqmManager:Landroid/os/SemHqmManager;
 
-    if-eqz p2, :cond_c
+    if-eqz p2, :cond_9
 
     const-string p2, "VibratorHqmHelper"
 
-    const-string/jumbo v0, "sendLoggingDataToHQM() Server update !!!"
+    const-string/jumbo v1, "sendLoggingDataToHQM() Server update !!!"
 
-    invoke-static {p2, v0}, Landroid/util/Log;->v(Ljava/lang/String;Ljava/lang/String;)I
+    invoke-static {p2, v1}, Landroid/util/Log;->v(Ljava/lang/String;Ljava/lang/String;)I
 
     iget-object v3, p1, Lcom/samsung/android/server/vibrator/VibratorHqmHelper;->mSemHqmManager:Landroid/os/SemHqmManager;
 
-    const-string v8, "0.0"
+    const-string v10, ""
 
-    const-string/jumbo v9, "sec"
+    const-string v12, ""
 
     const/4 v4, 0x0
 
@@ -446,27 +345,27 @@
 
     const-string/jumbo v7, "sm"
 
-    const-string v10, ""
+    const-string v8, "0.0"
 
-    const-string v12, ""
+    const-string/jumbo v9, "sec"
 
     invoke-virtual/range {v3 .. v12}, Landroid/os/SemHqmManager;->sendHWParamToHQM(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Z
 
-    :cond_c
+    :cond_9
     :goto_5
     iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mHqmLoggingData:Lcom/samsung/android/server/vibrator/VibratorHqmData;
 
-    iput v2, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mRingCount:I
+    iput v0, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mRingCount:I
 
-    iput v2, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mAlarmCount:I
+    iput v0, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mAlarmCount:I
 
-    iput v2, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mNotificationCount:I
+    iput v0, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mNotificationCount:I
 
-    iput v2, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mTouchCount:I
+    iput v0, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mTouchCount:I
 
-    iput v2, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mExtraCount:I
+    iput v0, p0, Lcom/samsung/android/server/vibrator/VibratorHqmData;->mExtraCount:I
 
-    :cond_d
+    :cond_a
     :goto_6
     return-void
 
@@ -481,7 +380,7 @@
 
     move-result p1
 
-    if-eqz p1, :cond_14
+    if-eqz p1, :cond_11
 
     iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -500,7 +399,7 @@
 
     const/16 v0, 0x13
 
-    if-ne p2, v0, :cond_e
+    if-ne p2, v0, :cond_b
 
     const-string p0, "VibratorManagerService"
 
@@ -510,21 +409,21 @@
 
     monitor-exit p1
 
-    goto/16 :goto_9
+    goto :goto_9
 
     :catchall_0
     move-exception p0
 
-    goto/16 :goto_8
+    goto :goto_8
 
-    :cond_e
+    :cond_b
     iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iget-object p2, p2, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
     const/4 v0, 0x0
 
-    if-eqz p2, :cond_10
+    if-eqz p2, :cond_d
 
     iget-object p2, p2, Lcom/android/server/vibrator/VibrationStepConductor;->mVibration:Lcom/android/server/vibrator/HalVibration;
 
@@ -542,13 +441,13 @@
 
     const/4 v3, 0x1
 
-    if-ne p2, v2, :cond_f
+    if-ne p2, v2, :cond_c
 
     move p2, v3
 
     goto :goto_7
 
-    :cond_f
+    :cond_c
     move p2, v0
 
     :goto_7
@@ -558,9 +457,9 @@
 
     move-result v2
 
-    if-eqz v2, :cond_10
+    if-eqz v2, :cond_d
 
-    if-eqz p2, :cond_10
+    if-eqz p2, :cond_d
 
     const-string p2, "ignore cancelling current vibration: "
 
@@ -570,14 +469,14 @@
 
     move v0, v3
 
-    :cond_10
-    if-eqz v0, :cond_11
+    :cond_d
+    if-eqz v0, :cond_e
 
     monitor-exit p1
 
     goto :goto_9
 
-    :cond_11
+    :cond_e
     iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iget-object v0, p2, Lcom/android/server/vibrator/VibratorManagerService;->mNextVibration:Lcom/android/server/vibrator/VibrationStepConductor;
@@ -588,7 +487,7 @@
 
     const/4 v0, 0x0
 
-    if-eqz p2, :cond_12
+    if-eqz p2, :cond_f
 
     iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -600,7 +499,7 @@
 
     invoke-virtual {p2, v1}, Lcom/android/server/vibrator/VibratorManagerService;->clearNextVibrationLocked(Lcom/android/server/vibrator/Vibration$EndInfo;)V
 
-    :cond_12
+    :cond_f
     iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iget-object v1, p2, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
@@ -609,33 +508,23 @@
 
     move-result p2
 
-    if-eqz p2, :cond_13
+    if-eqz p2, :cond_10
 
-    iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
+    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
-    iget-object p2, p2, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
+    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    new-instance v1, Lcom/android/server/vibrator/Vibration$EndInfo;
+    new-instance p2, Lcom/android/server/vibrator/Vibration$EndInfo;
 
-    sget-object v2, Lcom/android/server/vibrator/Vibration$Status;->CANCELLED_BY_SCREEN_OFF:Lcom/android/server/vibrator/Vibration$Status;
+    sget-object v1, Lcom/android/server/vibrator/Vibration$Status;->CANCELLED_BY_SCREEN_OFF:Lcom/android/server/vibrator/Vibration$Status;
 
-    invoke-direct {v1, v2, v0}, Lcom/android/server/vibrator/Vibration$EndInfo;-><init>(Lcom/android/server/vibrator/Vibration$Status;Lcom/android/server/vibrator/Vibration$CallerInfo;)V
+    invoke-direct {p2, v1, v0}, Lcom/android/server/vibrator/Vibration$EndInfo;-><init>(Lcom/android/server/vibrator/Vibration$Status;Lcom/android/server/vibrator/Vibration$CallerInfo;)V
 
     const/4 v0, 0x0
 
-    invoke-virtual {p2, v1, v0}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
-
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz p0, :cond_13
-
-    const-string p2, "cancel"
+    invoke-virtual {p0, p2, v0}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
-    invoke-virtual {p0, p2}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
-    :cond_13
+    :cond_10
     monitor-exit p1
 
     goto :goto_9
@@ -647,10 +536,12 @@
 
     throw p0
 
-    :cond_14
+    :cond_11
     :goto_9
     return-void
 
+    nop
+
     :pswitch_data_0
     .packed-switch 0x0
         :pswitch_0
diff --git a/smali_classes2/com/android/server/vibrator/VibratorManagerService$ExternalVibratorService.smali b/smali_classes2/com/android/server/vibrator/VibratorManagerService$ExternalVibratorService.smali
index a6248cd..5095ee7 100644
--- a/smali_classes2/com/android/server/vibrator/VibratorManagerService$ExternalVibratorService.smali
+++ b/smali_classes2/com/android/server/vibrator/VibratorManagerService$ExternalVibratorService.smali
@@ -80,7 +80,7 @@
 
     const/4 v8, 0x0
 
-    if-ge v6, v7, :cond_19
+    if-ge v6, v7, :cond_17
 
     iget-object v7, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -100,7 +100,7 @@
 
     move-result v7
 
-    if-eqz v7, :cond_18
+    if-eqz v7, :cond_16
 
     const-string v6, "android.permission.VIBRATE"
 
@@ -237,11 +237,11 @@
 
     iget-object v7, v6, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentExternalVibration:Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;
 
-    if-nez v7, :cond_7
+    if-nez v7, :cond_6
 
     iget-object v6, v6, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    if-eqz v6, :cond_6
+    if-eqz v6, :cond_5
 
     iget-object v7, v2, Lcom/android/server/vibrator/Vibration;->stats:Lcom/android/server/vibrator/VibrationStats;
 
@@ -277,31 +277,20 @@
 
     invoke-virtual {v6, v7, v10}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
-    iget-object v6, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object v6, v6, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz v6, :cond_5
-
-    const-string v7, "cancel"
-
-    invoke-virtual {v6, v7}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
-    :cond_5
     move v7, v3
 
     move v6, v10
 
     goto :goto_1
 
-    :cond_6
+    :cond_5
     move v6, v3
 
     move v7, v6
 
     goto :goto_1
 
-    :cond_7
+    :cond_6
     iget-object v6, v7, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->externalVibration:Landroid/os/ExternalVibration;
 
     invoke-virtual {v6}, Landroid/os/ExternalVibration;->mute()Z
@@ -328,17 +317,6 @@
 
     invoke-virtual {v6, v7, v10}, Lcom/android/server/vibrator/VibratorManagerService;->endExternalVibrateLocked(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
-    iget-object v6, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object v6, v6, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz v6, :cond_8
-
-    const-string/jumbo v7, "mute"
-
-    invoke-virtual {v6, v7}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
-    :cond_8
     move v6, v3
 
     move v7, v10
@@ -360,7 +338,7 @@
 
     move-result v11
 
-    if-eqz v11, :cond_9
+    if-eqz v11, :cond_7
 
     iget-object v11, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -368,7 +346,7 @@
 
     invoke-virtual {v11}, Lcom/android/server/vibrator/VibrationSettings;->update()V
 
-    :cond_9
+    :cond_7
     iget-object v11, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     iput-object v2, v11, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentExternalVibration:Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;
@@ -415,16 +393,16 @@
 
     move-result v12
 
-    if-eqz v12, :cond_a
+    if-eqz v12, :cond_8
 
     iput v9, v11, Lcom/android/server/vibrator/VibrationStats;->mAdaptiveScale:F
 
-    :cond_a
+    :cond_8
     monitor-exit v4
     :try_end_0
     .catchall {:try_start_0 .. :try_end_0} :catchall_0
 
-    if-eqz v6, :cond_b
+    if-eqz v6, :cond_9
 
     iget-object v4, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -436,7 +414,7 @@
 
     move-result v4
 
-    if-nez v4, :cond_b
+    if-nez v4, :cond_9
 
     const-string v1, "VibratorManagerService"
 
@@ -478,25 +456,25 @@
 
     throw v0
 
-    :cond_b
-    if-nez v7, :cond_c
+    :cond_9
+    if-nez v7, :cond_a
 
     const-string v4, "VibratorManagerService"
 
-    const-string v6, "Vibrator going under external control."
+    const-string v5, "Vibrator going under external control."
 
-    invoke-static {v4, v6}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
+    invoke-static {v4, v5}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
 
     iget-object v4, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
-    iget-object v6, v2, Lcom/android/server/vibrator/Vibration;->stats:Lcom/android/server/vibrator/VibrationStats;
+    iget-object v5, v2, Lcom/android/server/vibrator/Vibration;->stats:Lcom/android/server/vibrator/VibrationStats;
 
-    invoke-virtual {v4, v10, v6}, Lcom/android/server/vibrator/VibratorManagerService;->setExternalControl(ZLcom/android/server/vibrator/VibrationStats;)V
+    invoke-virtual {v4, v10, v5}, Lcom/android/server/vibrator/VibratorManagerService;->setExternalControl(ZLcom/android/server/vibrator/VibrationStats;)V
 
-    :cond_c
+    :cond_a
     sget-boolean v4, Lcom/samsung/android/vibrator/VibRune;->SUPPORT_ACH:Z
 
-    if-eqz v4, :cond_13
+    if-eqz v4, :cond_11
 
     iget-object v4, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -504,81 +482,81 @@
 
     invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->getVibrationAttributes()Landroid/os/VibrationAttributes;
 
-    move-result-object v6
+    move-result-object v5
 
-    invoke-virtual {v6}, Landroid/os/VibrationAttributes;->getUsage()I
+    invoke-virtual {v5}, Landroid/os/VibrationAttributes;->getUsage()I
 
-    move-result v6
+    move-result v5
 
-    invoke-virtual {v4, v6}, Lcom/android/server/vibrator/VibrationSettings;->getCurrentMagnitude(I)I
+    invoke-virtual {v4, v5}, Lcom/android/server/vibrator/VibrationSettings;->getCurrentMagnitude(I)I
 
     move-result v4
 
-    new-instance v6, Landroid/os/ExternalVibrationScale;
+    new-instance v5, Landroid/os/ExternalVibrationScale;
 
-    invoke-direct {v6}, Landroid/os/ExternalVibrationScale;-><init>()V
+    invoke-direct {v5}, Landroid/os/ExternalVibrationScale;-><init>()V
 
-    iput v3, v6, Landroid/os/ExternalVibrationScale;->scaleLevel:I
+    iput v3, v5, Landroid/os/ExternalVibrationScale;->scaleLevel:I
 
-    iget-object v7, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->externalVibration:Landroid/os/ExternalVibration;
+    iget-object v6, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->externalVibration:Landroid/os/ExternalVibration;
 
-    invoke-virtual {v7}, Landroid/os/ExternalVibration;->getVibrationAttributesWithTags()Landroid/os/VibrationAttributes;
+    invoke-virtual {v6}, Landroid/os/ExternalVibration;->getVibrationAttributesWithTags()Landroid/os/VibrationAttributes;
 
-    move-result-object v7
+    move-result-object v6
 
-    invoke-virtual {v7}, Landroid/os/VibrationAttributes;->getTags()Ljava/util/Set;
+    invoke-virtual {v6}, Landroid/os/VibrationAttributes;->getTags()Ljava/util/Set;
 
-    move-result-object v7
+    move-result-object v6
 
-    invoke-interface {v7}, Ljava/util/Set;->iterator()Ljava/util/Iterator;
+    invoke-interface {v6}, Ljava/util/Set;->iterator()Ljava/util/Iterator;
 
-    move-result-object v7
+    move-result-object v6
 
-    :cond_d
+    :cond_b
     :goto_2
-    invoke-interface {v7}, Ljava/util/Iterator;->hasNext()Z
+    invoke-interface {v6}, Ljava/util/Iterator;->hasNext()Z
 
-    move-result v8
+    move-result v7
 
-    if-eqz v8, :cond_e
+    if-eqz v7, :cond_c
 
-    invoke-interface {v7}, Ljava/util/Iterator;->next()Ljava/lang/Object;
+    invoke-interface {v6}, Ljava/util/Iterator;->next()Ljava/lang/Object;
 
-    move-result-object v8
+    move-result-object v7
 
-    check-cast v8, Ljava/lang/String;
+    check-cast v7, Ljava/lang/String;
 
-    const-string v9, "HAPTIC_INTENSITY"
+    const-string v8, "HAPTIC_INTENSITY"
 
-    invoke-virtual {v8, v9}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z
+    invoke-virtual {v7, v8}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z
 
-    move-result v9
+    move-result v8
 
-    if-eqz v9, :cond_d
+    if-eqz v8, :cond_b
 
-    const-string v9, "="
+    const-string v8, "="
 
-    invoke-virtual {v8, v9}, Ljava/lang/String;->split(Ljava/lang/String;)[Ljava/lang/String;
+    invoke-virtual {v7, v8}, Ljava/lang/String;->split(Ljava/lang/String;)[Ljava/lang/String;
 
-    move-result-object v8
+    move-result-object v7
 
-    aget-object v9, v8, v10
+    aget-object v8, v7, v10
 
-    if-eqz v9, :cond_d
+    if-eqz v8, :cond_b
 
     const-string v4, "VibratorManagerService"
 
-    new-instance v9, Ljava/lang/StringBuilder;
+    new-instance v8, Ljava/lang/StringBuilder;
 
-    const-string v11, "ach intensity : "
+    const-string v9, "ach intensity : "
 
-    invoke-direct {v9, v11}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
+    invoke-direct {v8, v9}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
 
-    aget-object v11, v8, v10
+    aget-object v9, v7, v10
 
-    invoke-static {v9, v11, v4}, Lcom/android/server/DirEncryptServiceHelper$$ExternalSyntheticOutline0;->m(Ljava/lang/StringBuilder;Ljava/lang/String;Ljava/lang/String;)V
+    invoke-static {v8, v9, v4}, Lcom/android/server/DirEncryptServiceHelper$$ExternalSyntheticOutline0;->m(Ljava/lang/StringBuilder;Ljava/lang/String;Ljava/lang/String;)V
 
-    aget-object v4, v8, v10
+    aget-object v4, v7, v10
 
     invoke-static {v4}, Ljava/lang/Integer;->parseInt(Ljava/lang/String;)I
 
@@ -586,62 +564,62 @@
 
     goto :goto_2
 
-    :cond_e
-    const-string v7, "VibratorManagerService"
+    :cond_c
+    const-string v6, "VibratorManagerService"
 
-    const-string v8, "getCurrentMagnitude : "
+    const-string v7, "getCurrentMagnitude : "
 
-    invoke-static {v4, v8, v7}, Lcom/android/server/AnyMotionDetector$$ExternalSyntheticOutline0;->m(ILjava/lang/String;Ljava/lang/String;)V
+    invoke-static {v4, v7, v6}, Lcom/android/server/AnyMotionDetector$$ExternalSyntheticOutline0;->m(ILjava/lang/String;Ljava/lang/String;)V
 
-    if-nez v4, :cond_f
+    if-nez v4, :cond_d
 
-    iput-object v6, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
+    iput-object v5, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
 
     goto :goto_3
 
-    :cond_f
-    iget-object v7, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
+    :cond_d
+    iget-object v6, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
-    iget-object v7, v7, Lcom/android/server/vibrator/VibratorManagerService;->mVibrators:Landroid/util/SparseArray;
+    iget-object v6, v6, Lcom/android/server/vibrator/VibratorManagerService;->mVibrators:Landroid/util/SparseArray;
 
-    invoke-virtual {v7, v3}, Landroid/util/SparseArray;->get(I)Ljava/lang/Object;
+    invoke-virtual {v6, v3}, Landroid/util/SparseArray;->get(I)Ljava/lang/Object;
 
-    move-result-object v7
+    move-result-object v6
 
-    check-cast v7, Lcom/android/server/vibrator/VibratorController;
+    check-cast v6, Lcom/android/server/vibrator/VibratorController;
 
-    if-eqz v7, :cond_10
+    if-eqz v6, :cond_e
 
-    int-to-long v8, v4
+    int-to-long v7, v4
 
-    iget-object v4, v7, Lcom/android/server/vibrator/VibratorController;->mNativeWrapper:Lcom/android/server/vibrator/VibratorController$NativeWrapper;
+    iget-object v4, v6, Lcom/android/server/vibrator/VibratorController;->mNativeWrapper:Lcom/android/server/vibrator/VibratorController$NativeWrapper;
 
-    invoke-virtual {v4, v8, v9}, Lcom/android/server/vibrator/VibratorController$NativeWrapper;->setIntensity(J)V
+    invoke-virtual {v4, v7, v8}, Lcom/android/server/vibrator/VibratorController$NativeWrapper;->setIntensity(J)V
 
-    :cond_10
-    iput-object v6, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
+    :cond_e
+    iput-object v5, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
 
     :goto_3
     iget-object v4, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
-    iget-object v6, v4, Lcom/android/server/vibrator/VibratorManagerService;->mGoodCatchManager:Lcom/samsung/android/server/audio/GoodCatchManager;
+    iget-object v5, v4, Lcom/android/server/vibrator/VibratorManagerService;->mGoodCatchManager:Lcom/samsung/android/server/audio/GoodCatchManager;
 
-    if-eqz v6, :cond_13
+    if-eqz v5, :cond_11
 
-    const-string v7, "VibratorService"
+    const-string v6, "VibratorService"
 
-    iget-object v8, v6, Lcom/samsung/android/server/audio/GoodCatchManager;->mModule:Ljava/lang/String;
+    iget-object v7, v5, Lcom/samsung/android/server/audio/GoodCatchManager;->mModule:Ljava/lang/String;
 
-    invoke-static {v7, v8}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
+    invoke-static {v6, v7}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
 
-    move-result v7
+    move-result v6
 
-    if-eqz v7, :cond_11
+    if-eqz v6, :cond_f
 
-    iget-boolean v3, v6, Lcom/samsung/android/server/audio/GoodCatchManager;->mVibrationFunc:Z
+    iget-boolean v3, v5, Lcom/samsung/android/server/audio/GoodCatchManager;->mVibrationFunc:Z
 
-    :cond_11
-    if-eqz v3, :cond_13
+    :cond_f
+    if-eqz v3, :cond_11
 
     invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->getPackage()Ljava/lang/String;
 
@@ -651,29 +629,29 @@
 
     move-result v3
 
-    if-nez v3, :cond_13
+    if-nez v3, :cond_11
 
     invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->getPackage()Ljava/lang/String;
 
     move-result-object v3
 
-    const-string v6, "android"
+    const-string v5, "android"
 
-    invoke-virtual {v6, v3}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+    invoke-virtual {v5, v3}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
 
-    move-result v6
+    move-result v5
 
-    if-eqz v6, :cond_12
+    if-eqz v5, :cond_10
 
     invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->isRepeating()Z
 
-    move-result v6
+    move-result v5
 
-    if-eqz v6, :cond_12
+    if-eqz v5, :cond_10
 
     const-string v3, "com.android.server.telecom"
 
-    :cond_12
+    :cond_10
     move-object v13, v3
 
     iget-object v3, v4, Lcom/android/server/vibrator/VibratorManagerService;->mGoodCatchManager:Lcom/samsung/android/server/audio/GoodCatchManager;
@@ -690,96 +668,74 @@
 
     invoke-virtual/range {v11 .. v16}, Lcom/samsung/android/sepunion/SemGoodCatchManager;->update(Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;)V
 
-    :cond_13
+    :cond_11
     const-string v3, "VibratorManagerService"
 
     new-instance v4, Ljava/lang/StringBuilder;
 
-    const-string v6, "Playing external vibration: "
+    const-string v5, "Playing external vibration: "
 
-    invoke-direct {v4, v6}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
+    invoke-direct {v4, v5}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
 
     invoke-virtual {v4, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;
 
     invoke-virtual {v4}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
 
-    move-result-object v4
+    move-result-object v1
 
-    invoke-static {v3, v4}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
+    invoke-static {v3, v1}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    iget-object v3, v2, Lcom/android/server/vibrator/Vibration;->stats:Lcom/android/server/vibrator/VibrationStats;
+    iget-object v1, v2, Lcom/android/server/vibrator/Vibration;->stats:Lcom/android/server/vibrator/VibrationStats;
 
-    iget-wide v6, v3, Lcom/android/server/vibrator/VibrationStats;->mEndUptimeMillis:J
+    iget-wide v3, v1, Lcom/android/server/vibrator/VibrationStats;->mEndUptimeMillis:J
 
-    const-wide/16 v8, 0x0
+    const-wide/16 v5, 0x0
 
-    cmp-long v4, v6, v8
+    cmp-long v3, v3, v5
 
-    if-lez v4, :cond_14
+    if-lez v3, :cond_12
 
     goto :goto_4
 
-    :cond_14
-    iget-wide v6, v3, Lcom/android/server/vibrator/VibrationStats;->mStartUptimeMillis:J
+    :cond_12
+    iget-wide v3, v1, Lcom/android/server/vibrator/VibrationStats;->mStartUptimeMillis:J
 
-    cmp-long v4, v6, v8
+    cmp-long v3, v3, v5
 
-    if-eqz v4, :cond_15
+    if-eqz v3, :cond_13
 
     goto :goto_4
 
-    :cond_15
+    :cond_13
     invoke-static {}, Landroid/os/SystemClock;->uptimeMillis()J
 
-    move-result-wide v6
+    move-result-wide v3
 
-    iput-wide v6, v3, Lcom/android/server/vibrator/VibrationStats;->mStartUptimeMillis:J
+    iput-wide v3, v1, Lcom/android/server/vibrator/VibrationStats;->mStartUptimeMillis:J
 
     invoke-static {}, Ljava/lang/System;->currentTimeMillis()J
 
-    move-result-wide v6
+    move-result-wide v3
 
-    iput-wide v6, v3, Lcom/android/server/vibrator/VibrationStats;->mStartTimeDebug:J
+    iput-wide v3, v1, Lcom/android/server/vibrator/VibrationStats;->mStartTimeDebug:J
 
     :goto_4
-    sget-boolean v3, Lcom/samsung/android/vibrator/VibRune;->SUPPORT_ACH:Z
-
-    if-eqz v3, :cond_16
-
-    iget-object v3, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
-
-    iget v3, v3, Landroid/os/ExternalVibrationScale;->scaleLevel:I
+    sget-boolean v1, Lcom/samsung/android/vibrator/VibRune;->SUPPORT_ACH:Z
 
-    if-eq v3, v5, :cond_16
+    if-eqz v1, :cond_14
 
-    iget-object v3, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
+    iget-object v1, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
 
-    iget-object v3, v3, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
+    iget v1, v1, Landroid/os/ExternalVibrationScale;->scaleLevel:I
 
-    if-eqz v3, :cond_16
-
-    invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->getPackage()Ljava/lang/String;
-
-    move-result-object v4
-
-    invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->getVibrationAttributesWithTags()Landroid/os/VibrationAttributes;
-
-    move-result-object v5
-
-    invoke-virtual/range {p1 .. p1}, Landroid/os/ExternalVibration;->isRepeating()Z
-
-    move-result v1
-
-    invoke-virtual {v3, v4, v5, v1}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->playVirtualSoundIfNeeded(Ljava/lang/String;Landroid/os/VibrationAttributes;Z)V
-
-    :cond_16
+    :cond_14
     iget-object v0, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
     invoke-virtual {v0}, Lcom/android/server/vibrator/VibratorManagerService;->getDefaultVibratorController()Lcom/android/server/vibrator/VibratorController;
 
     move-result-object v1
 
-    if-eqz v1, :cond_17
+    if-eqz v1, :cond_15
 
     invoke-virtual {v0}, Lcom/android/server/vibrator/VibratorManagerService;->getDefaultVibratorController()Lcom/android/server/vibrator/VibratorController;
 
@@ -805,18 +761,18 @@
 
     throw v0
 
-    :cond_17
+    :cond_15
     :goto_5
     iget-object v0, v2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->scale:Landroid/os/ExternalVibrationScale;
 
     return-object v0
 
-    :cond_18
+    :cond_16
     add-int/lit8 v6, v6, 0x1
 
     goto/16 :goto_0
 
-    :cond_19
+    :cond_17
     :try_start_3
     iget-object v0, v0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
 
@@ -894,16 +850,6 @@
 
     invoke-static {p1, v0}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibratorService;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object p1, p1, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz p1, :cond_0
-
-    const-string/jumbo v0, "stop"
-
-    invoke-virtual {p1, v0}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
     goto :goto_0
 
     :catchall_0
diff --git a/smali_classes2/com/android/server/vibrator/VibratorManagerService$Lifecycle.smali b/smali_classes2/com/android/server/vibrator/VibratorManagerService$Lifecycle.smali
index b35128a..fcec736 100644
--- a/smali_classes2/com/android/server/vibrator/VibratorManagerService$Lifecycle.smali
+++ b/smali_classes2/com/android/server/vibrator/VibratorManagerService$Lifecycle.smali
@@ -19,7 +19,7 @@
 
 # virtual methods
 .method public final onBootPhase(I)V
-    .locals 2
+    .locals 1
 
     const/16 v0, 0x1f4
 
@@ -29,7 +29,7 @@
 
     invoke-virtual {p0}, Lcom/android/server/vibrator/VibratorManagerService;->systemReady()V
 
-    goto :goto_1
+    goto :goto_0
 
     :cond_0
     const/16 v0, 0x3e8
@@ -38,67 +38,56 @@
 
     iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService$Lifecycle;->mService:Lcom/android/server/vibrator/VibratorManagerService;
 
-    iget-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVibrationSettings:Lcom/android/server/vibrator/VibrationSettings;
+    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVibrationSettings:Lcom/android/server/vibrator/VibrationSettings;
 
-    iget-object p1, p1, Lcom/android/server/vibrator/VibrationSettings;->mCustomSettings:Lcom/android/server/vibrator/VibrationCustomSettings;
+    iget-object p0, p0, Lcom/android/server/vibrator/VibrationSettings;->mCustomSettings:Lcom/android/server/vibrator/VibrationCustomSettings;
 
-    iget-object v0, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->mService:Lcom/android/server/vibrator/VibratorManagerService;
+    iget-object p1, p0, Lcom/android/server/vibrator/VibrationCustomSettings;->mService:Lcom/android/server/vibrator/VibratorManagerService;
 
-    invoke-virtual {v0}, Lcom/android/server/vibrator/VibratorManagerService;->getDefaultVibratorController()Lcom/android/server/vibrator/VibratorController;
+    invoke-virtual {p1}, Lcom/android/server/vibrator/VibratorManagerService;->getDefaultVibratorController()Lcom/android/server/vibrator/VibratorController;
 
-    move-result-object v1
+    move-result-object v0
 
-    if-nez v1, :cond_1
+    if-nez v0, :cond_1
 
     goto :goto_0
 
     :cond_1
-    invoke-virtual {v0}, Lcom/android/server/vibrator/VibratorManagerService;->getDefaultVibratorController()Lcom/android/server/vibrator/VibratorController;
+    invoke-virtual {p1}, Lcom/android/server/vibrator/VibratorManagerService;->getDefaultVibratorController()Lcom/android/server/vibrator/VibratorController;
 
-    move-result-object v0
+    move-result-object p1
 
-    iget-object v0, v0, Lcom/android/server/vibrator/VibratorController;->mNativeWrapper:Lcom/android/server/vibrator/VibratorController$NativeWrapper;
+    iget-object p1, p1, Lcom/android/server/vibrator/VibratorController;->mNativeWrapper:Lcom/android/server/vibrator/VibratorController$NativeWrapper;
 
-    invoke-virtual {v0}, Lcom/android/server/vibrator/VibratorController$NativeWrapper;->supportsFoldState()Z
+    invoke-virtual {p1}, Lcom/android/server/vibrator/VibratorController$NativeWrapper;->supportsFoldState()Z
 
-    move-result v0
+    move-result p1
 
-    if-nez v0, :cond_2
+    if-nez p1, :cond_2
 
-    const-string p1, "VibratorManagerService"
+    const-string p0, "VibratorManagerService"
 
-    const-string v0, "Fold mode is not supported"
+    const-string p1, "Fold mode is not supported"
 
-    invoke-static {p1, v0}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
+    invoke-static {p0, p1}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
     goto :goto_0
 
     :cond_2
     invoke-static {}, Lcom/samsung/android/view/SemWindowManager;->getInstance()Lcom/samsung/android/view/SemWindowManager;
 
-    move-result-object v0
-
-    new-instance v1, Lcom/android/server/vibrator/VibrationCustomSettings$1;
+    move-result-object p1
 
-    invoke-direct {v1, p1}, Lcom/android/server/vibrator/VibrationCustomSettings$1;-><init>(Lcom/android/server/vibrator/VibrationCustomSettings;)V
+    new-instance v0, Lcom/android/server/vibrator/VibrationCustomSettings$1;
 
-    const/4 p1, 0x0
+    invoke-direct {v0, p0}, Lcom/android/server/vibrator/VibrationCustomSettings$1;-><init>(Lcom/android/server/vibrator/VibrationCustomSettings;)V
 
-    invoke-virtual {v0, v1, p1}, Lcom/samsung/android/view/SemWindowManager;->registerFoldStateListener(Lcom/samsung/android/view/SemWindowManager$FoldStateListener;Landroid/os/Handler;)V
+    const/4 p0, 0x0
 
-    :goto_0
-    new-instance p1, Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    iget-object v0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mContext:Landroid/content/Context;
-
-    iget-object v1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVibrationSettings:Lcom/android/server/vibrator/VibrationSettings;
-
-    invoke-direct {p1, v0, v1}, Lcom/android/server/vibrator/VirtualVibSoundHelper;-><init>(Landroid/content/Context;Lcom/android/server/vibrator/VibrationSettings;)V
-
-    iput-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
+    invoke-virtual {p1, v0, p0}, Lcom/samsung/android/view/SemWindowManager;->registerFoldStateListener(Lcom/samsung/android/view/SemWindowManager$FoldStateListener;Landroid/os/Handler;)V
 
     :cond_3
-    :goto_1
+    :goto_0
     return-void
 .end method
 
diff --git a/smali_classes2/com/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1.smali b/smali_classes2/com/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1.smali
deleted file mode 100644
index a5133f0..0000000
--- a/smali_classes2/com/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1.smali
+++ /dev/null
@@ -1,71 +0,0 @@
-.class public final synthetic Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;
-.super Ljava/lang/Object;
-.source "qb/94473074 dbff70aba474d6778c6803659cc2a1e8b35def36a25340fb243c176bbdb492c9"
-
-# interfaces
-.implements Ljava/lang/Runnable;
-
-
-# instance fields
-.field public final synthetic f$0:Lcom/android/server/vibrator/VibratorManagerService$1;
-
-.field public final synthetic f$1:Ljava/lang/String;
-
-
-# direct methods
-.method public synthetic constructor <init>(Lcom/android/server/vibrator/VibratorManagerService$1;Ljava/lang/String;)V
-    .locals 0
-
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
-
-    iput-object p1, p0, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;->f$0:Lcom/android/server/vibrator/VibratorManagerService$1;
-
-    iput-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;->f$1:Ljava/lang/String;
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public final run()V
-    .locals 2
-
-    iget-object v0, p0, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;->f$0:Lcom/android/server/vibrator/VibratorManagerService$1;
-
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService$SamsungBroadcastReceiver$$ExternalSyntheticLambda1;->f$1:Ljava/lang/String;
-
-    iget-object v1, v0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object v1, v1, Lcom/android/server/vibrator/VibratorManagerService;->mLock:Ljava/lang/Object;
-
-    monitor-enter v1
-
-    :try_start_0
-    iget-object v0, v0, Lcom/android/server/vibrator/VibratorManagerService$1;->this$0:Lcom/android/server/vibrator/VibratorManagerService;
-
-    iget-object v0, v0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz v0, :cond_0
-
-    invoke-virtual {v0, p0}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
-    goto :goto_0
-
-    :catchall_0
-    move-exception p0
-
-    goto :goto_1
-
-    :cond_0
-    :goto_0
-    monitor-exit v1
-
-    return-void
-
-    :goto_1
-    monitor-exit v1
-    :try_end_0
-    .catchall {:try_start_0 .. :try_end_0} :catchall_0
-
-    throw p0
-.end method
diff --git a/smali_classes2/com/android/server/vibrator/VibratorManagerService.smali b/smali_classes2/com/android/server/vibrator/VibratorManagerService.smali
index 39ed879..97c79ba 100644
--- a/smali_classes2/com/android/server/vibrator/VibratorManagerService.smali
+++ b/smali_classes2/com/android/server/vibrator/VibratorManagerService.smali
@@ -76,8 +76,6 @@
 
 .field public final mVibrators:Landroid/util/SparseArray;
 
-.field public mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
 
 # direct methods
 .method public static -$$Nest$mreportFinishedVibrationLocked(Lcom/android/server/vibrator/VibratorManagerService;Lcom/android/server/vibrator/Vibration$EndInfo;)V
@@ -444,24 +442,12 @@
 
     const-string v9, "com.sec.media.action.VIBRTOR_LOGGING"
 
-    const-string v10, "android.media.STREAM_DEVICES_CHANGED_ACTION"
+    const-string v10, "com.android.launcher3.quickstep.closeall"
 
     invoke-static {v1, v2, v3, v9, v10}, Lcom/android/server/VcnManagementService$$ExternalSyntheticOutline0;->m(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Landroid/content/IntentFilter;
 
     move-result-object v1
 
-    const-string v2, "android.intent.action.HEADSET_PLUG"
-
-    invoke-virtual {v1, v2}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
-
-    const-string v2, "android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED"
-
-    invoke-virtual {v1, v2}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
-
-    const-string v2, "com.android.launcher3.quickstep.closeall"
-
-    invoke-virtual {v1, v2}, Landroid/content/IntentFilter;->addAction(Ljava/lang/String;)V
-
     const/4 v9, 0x4
 
     invoke-virtual {p1, v0, v1, v9}, Landroid/content/Context;->registerReceiver(Landroid/content/BroadcastReceiver;Landroid/content/IntentFilter;I)Landroid/content/Intent;
@@ -474,8 +460,6 @@
 
     invoke-direct {v1, p0}, Ljava/lang/ref/WeakReference;-><init>(Ljava/lang/Object;)V
 
-    iput-object v1, v0, Lcom/android/server/vibrator/VibratorManagerInternal;->mServiceWeakReference:Ljava/lang/ref/WeakReference;
-
     const-class v1, Lcom/android/server/vibrator/VibratorManagerInternal;
 
     invoke-static {v1, v0}, Lcom/android/server/LocalServices;->addService(Ljava/lang/Class;Ljava/lang/Object;)V
@@ -1383,33 +1367,24 @@
     iput-object v2, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentExternalVibration:Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;
 
     :cond_0
-    iget-object v1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
+    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    if-eqz v1, :cond_1
+    if-eqz p0, :cond_1
 
-    new-instance v3, Lcom/android/server/vibrator/Vibration$EndInfo;
+    new-instance v1, Lcom/android/server/vibrator/Vibration$EndInfo;
 
-    invoke-direct {v3, v0, v2}, Lcom/android/server/vibrator/Vibration$EndInfo;-><init>(Lcom/android/server/vibrator/Vibration$Status;Lcom/android/server/vibrator/Vibration$CallerInfo;)V
+    invoke-direct {v1, v0, v2}, Lcom/android/server/vibrator/Vibration$EndInfo;-><init>(Lcom/android/server/vibrator/Vibration$Status;Lcom/android/server/vibrator/Vibration$CallerInfo;)V
 
     const/4 v0, 0x1
 
-    invoke-virtual {v1, v3, v0}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
+    invoke-virtual {p0, v1, v0}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
     :cond_1
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz p0, :cond_2
-
-    const-string/jumbo v0, "recovery"
-
-    invoke-virtual {p0, v0}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
-    :cond_2
     return-void
 .end method
 
 .method public final cancelVibrate(ILandroid/os/IBinder;)V
-    .locals 10
+    .locals 9
 
     const-string v0, "cancelVibrate"
 
@@ -1481,23 +1456,21 @@
     :catchall_0
     move-exception p0
 
-    goto :goto_3
+    goto :goto_1
 
     :cond_0
     :goto_0
     iget-object v6, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    const/4 v7, 0x1
-
-    const/4 v8, 0x0
+    const/4 v7, 0x0
 
     if-eqz v6, :cond_1
 
     iget-object v6, v6, Lcom/android/server/vibrator/VibrationStepConductor;->mVibration:Lcom/android/server/vibrator/HalVibration;
 
-    iget-object v9, v6, Lcom/android/server/vibrator/Vibration;->callerToken:Landroid/os/IBinder;
+    iget-object v8, v6, Lcom/android/server/vibrator/Vibration;->callerToken:Landroid/os/IBinder;
 
-    if-ne v9, p2, :cond_1
+    if-ne v8, p2, :cond_1
 
     iget-object p2, v6, Lcom/android/server/vibrator/Vibration;->callerInfo:Lcom/android/server/vibrator/Vibration$CallerInfo;
 
@@ -1511,27 +1484,20 @@
 
     iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    invoke-virtual {p2, v3, v8}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
-
-    move p2, v7
-
-    goto :goto_1
+    invoke-virtual {p2, v3, v7}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
     :cond_1
-    move p2, v8
-
-    :goto_1
-    iget-object v6, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentExternalVibration:Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;
+    iget-object p2, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentExternalVibration:Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;
 
-    if-eqz v6, :cond_3
+    if-eqz p2, :cond_3
 
-    iget-object v6, v6, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->externalVibration:Landroid/os/ExternalVibration;
+    iget-object p2, p2, Lcom/android/server/vibrator/VibratorManagerService$ExternalVibrationHolder;->externalVibration:Landroid/os/ExternalVibration;
 
-    invoke-virtual {v6}, Landroid/os/ExternalVibration;->getVibrationAttributes()Landroid/os/VibrationAttributes;
+    invoke-virtual {p2}, Landroid/os/ExternalVibration;->getVibrationAttributes()Landroid/os/VibrationAttributes;
 
-    move-result-object v6
+    move-result-object p2
 
-    invoke-static {v6, p1}, Lcom/android/server/vibrator/VibratorManagerService;->shouldCancelVibration(Landroid/os/VibrationAttributes;I)Z
+    invoke-static {p2, p1}, Lcom/android/server/vibrator/VibratorManagerService;->shouldCancelVibration(Landroid/os/VibrationAttributes;I)Z
 
     move-result p1
 
@@ -1569,7 +1535,7 @@
     :catchall_1
     move-exception p0
 
-    goto :goto_4
+    goto :goto_2
 
     :cond_2
     :try_start_4
@@ -1579,27 +1545,11 @@
 
     invoke-virtual {p1}, Landroid/os/ExternalVibration;->mute()Z
 
-    invoke-virtual {p0, v3, v8}, Lcom/android/server/vibrator/VibratorManagerService;->endExternalVibrateLocked(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
-
-    goto :goto_2
-
-    :cond_3
-    move v7, p2
-
-    :goto_2
-    if-eqz v7, :cond_4
-
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz p0, :cond_4
-
-    const-string p1, "cancel"
-
-    invoke-virtual {p0, p1}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
+    invoke-virtual {p0, v3, v7}, Lcom/android/server/vibrator/VibratorManagerService;->endExternalVibrateLocked(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
     :try_end_4
     .catchall {:try_start_4 .. :try_end_4} :catchall_0
 
-    :cond_4
+    :cond_3
     :try_start_5
     invoke-static {v4, v5}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
@@ -1611,13 +1561,13 @@
 
     return-void
 
-    :goto_3
+    :goto_1
     :try_start_6
     invoke-static {v4, v5}, Landroid/os/Binder;->restoreCallingIdentity(J)V
 
     throw p0
 
-    :goto_4
+    :goto_2
     monitor-exit v0
     :try_end_6
     .catchall {:try_start_6 .. :try_end_6} :catchall_1
@@ -7090,16 +7040,16 @@
 
     iget-object v0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVibrationThread:Lcom/android/server/vibrator/VibrationThread;
 
-    iget-object v5, v0, Lcom/android/server/vibrator/VibrationThread;->mLock:Ljava/lang/Object;
+    iget-object v1, v0, Lcom/android/server/vibrator/VibrationThread;->mLock:Ljava/lang/Object;
 
-    monitor-enter v5
+    monitor-enter v1
     :try_end_2
     .catchall {:try_start_2 .. :try_end_2} :catchall_0
 
     :try_start_3
-    iget-object v6, v0, Lcom/android/server/vibrator/VibrationThread;->mRequestedActiveConductor:Lcom/android/server/vibrator/VibrationStepConductor;
+    iget-object v5, v0, Lcom/android/server/vibrator/VibrationThread;->mRequestedActiveConductor:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    if-eqz v6, :cond_3
+    if-eqz v5, :cond_3
 
     const-string p1, "VibrationThread"
 
@@ -7107,7 +7057,7 @@
 
     invoke-static {p1, v0}, Landroid/util/Slog;->wtf(Ljava/lang/String;Ljava/lang/String;)I
 
-    monitor-exit v5
+    monitor-exit v1
     :try_end_3
     .catchall {:try_start_3 .. :try_end_3} :catchall_1
 
@@ -7135,48 +7085,28 @@
     :try_start_5
     iput-object p1, v0, Lcom/android/server/vibrator/VibrationThread;->mRequestedActiveConductor:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    iget-object p1, v0, Lcom/android/server/vibrator/VibrationThread;->mLock:Ljava/lang/Object;
+    iget-object p0, v0, Lcom/android/server/vibrator/VibrationThread;->mLock:Ljava/lang/Object;
 
-    invoke-virtual {p1}, Ljava/lang/Object;->notifyAll()V
+    invoke-virtual {p0}, Ljava/lang/Object;->notifyAll()V
 
-    monitor-exit v5
+    monitor-exit v1
     :try_end_5
     .catchall {:try_start_5 .. :try_end_5} :catchall_1
 
-    :try_start_6
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz p0, :cond_4
-
-    iget-object p1, v1, Lcom/android/server/vibrator/Vibration;->callerInfo:Lcom/android/server/vibrator/Vibration$CallerInfo;
-
-    iget-object v0, p1, Lcom/android/server/vibrator/Vibration$CallerInfo;->opPkg:Ljava/lang/String;
-
-    iget-object p1, p1, Lcom/android/server/vibrator/Vibration$CallerInfo;->attrs:Landroid/os/VibrationAttributes;
-
-    invoke-virtual {v1}, Lcom/android/server/vibrator/HalVibration;->isRepeating()Z
-
-    move-result v1
-
-    invoke-virtual {p0, v0, p1, v1}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->playVirtualSoundIfNeeded(Ljava/lang/String;Landroid/os/VibrationAttributes;Z)V
-    :try_end_6
-    .catchall {:try_start_6 .. :try_end_6} :catchall_0
-
-    :cond_4
     invoke-static {v2, v3}, Landroid/os/Trace;->traceEnd(J)V
 
     return-object v4
 
     :goto_0
-    :try_start_7
-    monitor-exit v5
-    :try_end_7
-    .catchall {:try_start_7 .. :try_end_7} :catchall_1
+    :try_start_6
+    monitor-exit v1
+    :try_end_6
+    .catchall {:try_start_6 .. :try_end_6} :catchall_1
 
-    :try_start_8
+    :try_start_7
     throw p0
-    :try_end_8
-    .catchall {:try_start_8 .. :try_end_8} :catchall_0
+    :try_end_7
+    .catchall {:try_start_7 .. :try_end_7} :catchall_0
 
     :goto_1
     invoke-static {v2, v3}, Landroid/os/Trace;->traceEnd(J)V
@@ -7636,25 +7566,17 @@
 
     invoke-static {v4, v1}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    iget-object v1, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
-
-    new-instance v3, Lcom/android/server/vibrator/Vibration$EndInfo;
-
-    sget-object v4, Lcom/android/server/vibrator/Vibration$Status;->CANCELLED_BY_SETTINGS_UPDATE:Lcom/android/server/vibrator/Vibration$Status;
-
-    const/4 v5, 0x0
-
-    invoke-direct {v3, v4, v5}, Lcom/android/server/vibrator/Vibration$EndInfo;-><init>(Lcom/android/server/vibrator/Vibration$Status;Lcom/android/server/vibrator/Vibration$CallerInfo;)V
+    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mCurrentVibration:Lcom/android/server/vibrator/VibrationStepConductor;
 
-    invoke-virtual {v1, v3, v2}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
+    new-instance v1, Lcom/android/server/vibrator/Vibration$EndInfo;
 
-    iget-object p0, p0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
+    sget-object v3, Lcom/android/server/vibrator/Vibration$Status;->CANCELLED_BY_SETTINGS_UPDATE:Lcom/android/server/vibrator/Vibration$Status;
 
-    if-eqz p0, :cond_4
+    const/4 v4, 0x0
 
-    const-string v1, "cancel"
+    invoke-direct {v1, v3, v4}, Lcom/android/server/vibrator/Vibration$EndInfo;-><init>(Lcom/android/server/vibrator/Vibration$Status;Lcom/android/server/vibrator/Vibration$CallerInfo;)V
 
-    invoke-virtual {p0, v1}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
+    invoke-virtual {p0, v1, v2}, Lcom/android/server/vibrator/VibrationStepConductor;->notifyCancelled(Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
     :cond_4
     monitor-exit v0
@@ -8329,7 +8251,7 @@
 
     :cond_18
     :goto_a
-    if-nez v3, :cond_1d
+    if-nez v3, :cond_1c
 
     invoke-static {}, Landroid/os/Binder;->clearCallingIdentity()J
 
@@ -8461,15 +8383,6 @@
 
     :cond_1b
     :goto_b
-    iget-object v5, v0, Lcom/android/server/vibrator/VibratorManagerService;->mVirtualVibSoundHelper:Lcom/android/server/vibrator/VirtualVibSoundHelper;
-
-    if-eqz v5, :cond_1c
-
-    const-string v6, "cancel"
-
-    invoke-virtual {v5, v6}, Lcom/android/server/vibrator/VirtualVibSoundHelper;->stopVirtualSound(Ljava/lang/String;)V
-
-    :cond_1c
     invoke-virtual {v0, v1}, Lcom/android/server/vibrator/VibratorManagerService;->startVibrationLocked(Lcom/android/server/vibrator/HalVibration;)Lcom/android/server/vibrator/Vibration$EndInfo;
 
     move-result-object v5
@@ -8488,13 +8401,13 @@
 
     throw v0
 
-    :cond_1d
+    :cond_1c
     :goto_d
-    if-eqz v3, :cond_1e
+    if-eqz v3, :cond_1d
 
     invoke-virtual {v0, v1, v3, v15}, Lcom/android/server/vibrator/VibratorManagerService;->endVibrationLocked(Lcom/android/server/vibrator/HalVibration;Lcom/android/server/vibrator/Vibration$EndInfo;Z)V
 
-    :cond_1e
+    :cond_1d
     invoke-virtual {v0, v1, v13}, Lcom/android/server/vibrator/VibratorManagerService;->reportVibrationInfo(Lcom/android/server/vibrator/HalVibration;Landroid/os/VibrationAttributes;)V
 
     iget-object v0, v0, Lcom/android/server/vibrator/VibratorManagerService;->mHqmLoggingData:Lcom/samsung/android/server/vibrator/VibratorHqmData;
diff --git a/smali_classes2/com/android/server/vibrator/VirtualVibSoundHelper.smali b/smali_classes2/com/android/server/vibrator/VirtualVibSoundHelper.smali
deleted file mode 100644
index 3733f62..0000000
--- a/smali_classes2/com/android/server/vibrator/VirtualVibSoundHelper.smali
+++ /dev/null
@@ -1,484 +0,0 @@
-.class public final Lcom/android/server/vibrator/VirtualVibSoundHelper;
-.super Ljava/lang/Object;
-.source "qb/94473074 dbff70aba474d6778c6803659cc2a1e8b35def36a25340fb243c176bbdb492c9"
-
-
-# instance fields
-.field public final mAudioSettingsHelper:Lcom/samsung/android/server/audio/AudioSettingsHelper;
-
-.field public mIsVirtualSoundPlaying:Z
-
-.field public final mSettings:Lcom/android/server/vibrator/VibrationSettings;
-
-.field public final mSoundPool:Landroid/media/SoundPool;
-
-.field public mStreamId:I
-
-.field public final mVirtualSoundId:I
-
-
-# direct methods
-.method public constructor <init>(Landroid/content/Context;Lcom/android/server/vibrator/VibrationSettings;)V
-    .locals 2
-
-    invoke-direct {p0}, Ljava/lang/Object;-><init>()V
-
-    iput-object p2, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSettings:Lcom/android/server/vibrator/VibrationSettings;
-
-    invoke-static {p1}, Lcom/samsung/android/server/audio/AudioSettingsHelper;->getInstance(Landroid/content/Context;)Lcom/samsung/android/server/audio/AudioSettingsHelper;
-
-    move-result-object p1
-
-    iput-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mAudioSettingsHelper:Lcom/samsung/android/server/audio/AudioSettingsHelper;
-
-    new-instance p1, Landroid/media/SoundPool$Builder;
-
-    invoke-direct {p1}, Landroid/media/SoundPool$Builder;-><init>()V
-
-    const/4 p2, 0x1
-
-    invoke-virtual {p1, p2}, Landroid/media/SoundPool$Builder;->setMaxStreams(I)Landroid/media/SoundPool$Builder;
-
-    move-result-object p1
-
-    new-instance v0, Landroid/media/AudioAttributes$Builder;
-
-    invoke-direct {v0}, Landroid/media/AudioAttributes$Builder;-><init>()V
-
-    const/16 v1, 0xd
-
-    invoke-virtual {v0, v1}, Landroid/media/AudioAttributes$Builder;->setUsage(I)Landroid/media/AudioAttributes$Builder;
-
-    move-result-object v0
-
-    invoke-virtual {v0, p2}, Landroid/media/AudioAttributes$Builder;->setFlags(I)Landroid/media/AudioAttributes$Builder;
-
-    move-result-object p2
-
-    const/4 v0, 0x4
-
-    invoke-virtual {p2, v0}, Landroid/media/AudioAttributes$Builder;->setContentType(I)Landroid/media/AudioAttributes$Builder;
-
-    move-result-object p2
-
-    const-string v0, "VIRTUAL_VIB_SOUND"
-
-    invoke-virtual {p2, v0}, Landroid/media/AudioAttributes$Builder;->semAddAudioTag(Ljava/lang/String;)Landroid/media/AudioAttributes$Builder;
-
-    move-result-object p2
-
-    invoke-virtual {p2}, Landroid/media/AudioAttributes$Builder;->build()Landroid/media/AudioAttributes;
-
-    move-result-object p2
-
-    invoke-virtual {p1, p2}, Landroid/media/SoundPool$Builder;->setAudioAttributes(Landroid/media/AudioAttributes;)Landroid/media/SoundPool$Builder;
-
-    move-result-object p1
-
-    invoke-virtual {p1}, Landroid/media/SoundPool$Builder;->build()Landroid/media/SoundPool;
-
-    move-result-object p1
-
-    iput-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSoundPool:Landroid/media/SoundPool;
-
-    const/4 p2, 0x0
-
-    iput-boolean p2, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mIsVirtualSoundPlaying:Z
-
-    const-string v0, "/system/media/audio/ui/VIB_Vibration_Call.ogg"
-
-    invoke-virtual {p1, v0, p2}, Landroid/media/SoundPool;->load(Ljava/lang/String;I)I
-
-    move-result p1
-
-    iput p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mVirtualSoundId:I
-
-    return-void
-.end method
-
-
-# virtual methods
-.method public final playVirtualSoundIfNeeded(Ljava/lang/String;Landroid/os/VibrationAttributes;Z)V
-    .locals 9
-
-    if-nez p3, :cond_0
-
-    return-void
-
-    :cond_0
-    const-string p3, "VIRTUAL_VIB_SOUND"
-
-    invoke-virtual {p2, p3}, Landroid/os/VibrationAttributes;->hasTag(Ljava/lang/String;)Z
-
-    move-result p3
-
-    if-nez p3, :cond_1
-
-    iget-object p3, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mAudioSettingsHelper:Lcom/samsung/android/server/audio/AudioSettingsHelper;
-
-    const-string/jumbo v0, "virtual_vibration_sound_allowance"
-
-    invoke-virtual {p3, p1, v0}, Lcom/samsung/android/server/audio/AudioSettingsHelper;->checkAppCategory(Ljava/lang/String;Ljava/lang/String;)Z
-
-    move-result p1
-
-    if-nez p1, :cond_1
-
-    return-void
-
-    :cond_1
-    iget-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSettings:Lcom/android/server/vibrator/VibrationSettings;
-
-    invoke-virtual {p2}, Landroid/os/VibrationAttributes;->getUsage()I
-
-    move-result p2
-
-    iget-object p1, p1, Lcom/android/server/vibrator/VibrationSettings;->mCustomSettings:Lcom/android/server/vibrator/VibrationCustomSettings;
-
-    const-string/jumbo p3, "vibration_sound_enabled"
-
-    const/4 v0, 0x0
-
-    invoke-virtual {p1, v0, p3}, Lcom/android/server/vibrator/VibrationCustomSettings;->loadSystemSetting(ILjava/lang/String;)I
-
-    move-result p3
-
-    const/4 v1, 0x1
-
-    if-ne p3, v1, :cond_b
-
-    const/16 p3, 0x21
-
-    if-eq p2, p3, :cond_2
-
-    goto/16 :goto_3
-
-    :cond_2
-    iget-object p2, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->mLock:Ljava/lang/Object;
-
-    monitor-enter p2
-
-    :try_start_0
-    iget-object p3, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->mAudioManager:Landroid/media/AudioManager;
-
-    if-nez p3, :cond_3
-
-    monitor-exit p2
-
-    goto/16 :goto_3
-
-    :catchall_0
-    move-exception p0
-
-    goto/16 :goto_2
-
-    :cond_3
-    invoke-virtual {p3}, Landroid/media/AudioManager;->getRingerModeInternal()I
-
-    move-result p3
-
-    if-eq p3, v1, :cond_4
-
-    monitor-exit p2
-
-    goto/16 :goto_3
-
-    :cond_4
-    iget-object p3, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->mAudioManager:Landroid/media/AudioManager;
-
-    const/4 v2, 0x2
-
-    invoke-virtual {p3, v2}, Landroid/media/AudioManager;->getDevices(I)[Landroid/media/AudioDeviceInfo;
-
-    move-result-object p3
-
-    array-length v2, p3
-
-    move v3, v0
-
-    move v4, v3
-
-    :goto_0
-    if-ge v3, v2, :cond_8
-
-    aget-object v5, p3, v3
-
-    invoke-virtual {v5}, Landroid/media/AudioDeviceInfo;->getType()I
-
-    move-result v6
-
-    const/16 v7, 0x8
-
-    if-eq v6, v7, :cond_7
-
-    invoke-virtual {v5}, Landroid/media/AudioDeviceInfo;->getType()I
-
-    move-result v6
-
-    const/16 v7, 0x16
-
-    if-ne v6, v7, :cond_5
-
-    goto :goto_1
-
-    :cond_5
-    invoke-virtual {v5}, Landroid/media/AudioDeviceInfo;->getType()I
-
-    move-result v5
-
-    const/4 v6, 0x7
-
-    if-ne v5, v6, :cond_6
-
-    add-int/lit8 v4, v4, 0x1
-
-    :cond_6
-    add-int/lit8 v3, v3, 0x1
-
-    goto :goto_0
-
-    :cond_7
-    :goto_1
-    const-string p1, "VibratorManagerService"
-
-    const-string/jumbo p3, "skip virtual sound: connected A2DP or USB_HEADSET"
-
-    invoke-static {p1, p3}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    monitor-exit p2
-
-    goto :goto_3
-
-    :cond_8
-    const-string p3, "VibratorManagerService"
-
-    new-instance v2, Ljava/lang/StringBuilder;
-
-    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V
-
-    const-string/jumbo v3, "sco Devices:"
-
-    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    invoke-virtual {v2, v4}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
-
-    const-string v3, ", only watch connected:"
-
-    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    iget-boolean v3, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->mOnlyWatchConnected:Z
-
-    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;
-
-    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object v2
-
-    invoke-static {p3, v2}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    if-eqz v4, :cond_9
-
-    if-ne v4, v1, :cond_a
-
-    iget-boolean p1, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->mOnlyWatchConnected:Z
-
-    if-eqz p1, :cond_a
-
-    :cond_9
-    move v0, v1
-
-    :cond_a
-    monitor-exit p2
-
-    goto :goto_3
-
-    :goto_2
-    monitor-exit p2
-    :try_end_0
-    .catchall {:try_start_0 .. :try_end_0} :catchall_0
-
-    throw p0
-
-    :cond_b
-    const-string p1, "VibratorManagerService"
-
-    const-string/jumbo p2, "shouldSoundForRingerMode false"
-
-    invoke-static {p1, p2}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    :goto_3
-    if-eqz v0, :cond_f
-
-    iget-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSoundPool:Landroid/media/SoundPool;
-
-    if-eqz p1, :cond_e
-
-    iget p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mVirtualSoundId:I
-
-    if-nez p1, :cond_c
-
-    goto :goto_4
-
-    :cond_c
-    iget-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSettings:Lcom/android/server/vibrator/VibrationSettings;
-
-    iget-object p1, p1, Lcom/android/server/vibrator/VibrationSettings;->mCustomSettings:Lcom/android/server/vibrator/VibrationCustomSettings;
-
-    iget-object p2, p1, Lcom/android/server/vibrator/VibrationCustomSettings;->LEVEL_TO_MAGNITUDE:[I
-
-    array-length p2, p2
-
-    sub-int/2addr p2, v1
-
-    const-string p3, "VIB_RECVCALL_MAGNITUDE"
-
-    invoke-virtual {p1, p2, p3}, Lcom/android/server/vibrator/VibrationCustomSettings;->loadSystemSetting(ILjava/lang/String;)I
-
-    move-result p1
-
-    int-to-float p1, p1
-
-    int-to-float p2, p2
-
-    div-float v5, p1, p2
-
-    const/4 p1, 0x0
-
-    cmpg-float p1, v5, p1
-
-    if-gtz p1, :cond_d
-
-    return-void
-
-    :cond_d
-    const-string p1, "VibratorManagerService"
-
-    new-instance p2, Ljava/lang/StringBuilder;
-
-    const-string/jumbo p3, "play virtual sound: "
-
-    invoke-direct {p2, p3}, Ljava/lang/StringBuilder;-><init>(Ljava/lang/String;)V
-
-    invoke-virtual {p2, v5}, Ljava/lang/StringBuilder;->append(F)Ljava/lang/StringBuilder;
-
-    const-string p3, " volume"
-
-    invoke-virtual {p2, p3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    invoke-virtual {p2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object p2
-
-    invoke-static {p1, p2}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    iput-boolean v1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mIsVirtualSoundPlaying:Z
-
-    iget-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSoundPool:Landroid/media/SoundPool;
-
-    iget p2, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mVirtualSoundId:I
-
-    const-string/jumbo p3, "stv_virtual_vib_sound"
-
-    invoke-virtual {p1, p2, p3}, Landroid/media/SoundPool;->semSetSituationType(ILjava/lang/String;)V
-
-    iget-object v2, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSoundPool:Landroid/media/SoundPool;
-
-    iget v3, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mVirtualSoundId:I
-
-    const/16 v7, 0x14
-
-    const/high16 v8, 0x3f800000    # 1.0f
-
-    const/4 v6, 0x0
-
-    move v4, v5
-
-    invoke-virtual/range {v2 .. v8}, Landroid/media/SoundPool;->play(IFFIIF)I
-
-    move-result p1
-
-    iput p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mStreamId:I
-
-    goto :goto_5
-
-    :cond_e
-    :goto_4
-    const-string p0, "VibratorManagerService"
-
-    const-string p1, "cannot play virtual sound"
-
-    invoke-static {p0, p1}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    return-void
-
-    :cond_f
-    const-string p0, "VibratorManagerService"
-
-    const-string/jumbo p1, "skip virtual sound: shouldSoundForRingerMode false"
-
-    invoke-static {p0, p1}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    :goto_5
-    return-void
-.end method
-
-.method public final stopVirtualSound(Ljava/lang/String;)V
-    .locals 3
-
-    const-string/jumbo v0, "stop virtual sound : "
-
-    iget-boolean v1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mIsVirtualSoundPlaying:Z
-
-    if-eqz v1, :cond_2
-
-    iget-object v1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSoundPool:Landroid/media/SoundPool;
-
-    const-string v2, "VibratorManagerService"
-
-    if-eqz v1, :cond_1
-
-    iget v1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mVirtualSoundId:I
-
-    if-nez v1, :cond_0
-
-    goto :goto_0
-
-    :cond_0
-    :try_start_0
-    invoke-virtual {v0, p1}, Ljava/lang/String;->concat(Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object p1
-
-    invoke-static {v2, p1}, Landroid/util/Slog;->d(Ljava/lang/String;Ljava/lang/String;)I
-
-    const/4 p1, 0x0
-
-    iput-boolean p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mIsVirtualSoundPlaying:Z
-
-    iget-object p1, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mSoundPool:Landroid/media/SoundPool;
-
-    iget p0, p0, Lcom/android/server/vibrator/VirtualVibSoundHelper;->mStreamId:I
-
-    invoke-virtual {p1, p0}, Landroid/media/SoundPool;->stop(I)V
-    :try_end_0
-    .catch Ljava/lang/Exception; {:try_start_0 .. :try_end_0} :catch_0
-
-    goto :goto_1
-
-    :catch_0
-    const-string p0, "failed stopping virtual sound"
-
-    invoke-static {v2, p0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;)I
-
-    goto :goto_1
-
-    :cond_1
-    :goto_0
-    const-string p0, "cannot stop virtual sound"
-
-    invoke-static {v2, p0}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;)I
-
-    :cond_2
-    :goto_1
-    return-void
-.end method

-- 
2.48.1
